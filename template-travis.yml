language: generic

before_install:
  # Setup a wildcard local DNS for *.dev
  - sudo apt-get install -qq -y --force-yes dnsmasq
  - echo "listen-address=127.0.0.1" | sudo tee -a /etc/dnsmasq.conf > /dev/null 2>&1
  - echo "bind-interfaces" | sudo tee -a /etc/dnsmasq.conf > /dev/null 2>&1
  - echo "address=/testspace-qa.com/${qa-ip}" | sudo tee -a /etc/dnsmasq.conf > /dev/null 2>&1
  - echo "user=root" | sudo tee -a /etc/dnsmasq.conf > /dev/null 2>&1
  - sudo service dnsmasq restart
  - mkdir -p $HOME/bin
  - curl -s https://testspace-client.s3.amazonaws.com/testspace-linux-dev.tgz | tar -zxvf- -C $HOME/bin
  - testspace config url http://$S2_TESTSPACE@s2.testspace-qa.com/sandio:testspace.test.ci
  - testspace -v

script:
  - printenv > printenv.txt
 
after_script:
  - testspace results.xml printenv.txt "standalone#travis.$TRAVIS_BUILD_NUMBER" --repo git
